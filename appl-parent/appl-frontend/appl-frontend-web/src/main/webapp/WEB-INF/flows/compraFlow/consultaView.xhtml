<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:p="http://primefaces.org/ui"
	xmlns:security="http://www.springframework.org/security/tags"
	xmlns:custom="http://ambar.org/facelets"
	template="/WEB-INF/templates/template_crud.xhtml">
	 
	<ui:define name="title">
		<h:outputText value="Consulta de Compra" /> 
	</ui:define>
	
	<ui:define name="toolbar_crud">
		<ui:include src="/WEB-INF/templates/toolbars/toolbar_consulta.xhtml" />
	</ui:define>
	
	<ui:define name="content_crud">	
		
		<p:panel id="content_crud" styleClass="data-form">

			<p:panelGrid columns="2" columnClasses="ui-grid-col-2,ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank">
				<p:outputLabel value="Nro Compra:  " styleClass="label-form"/>
				<h:outputText value="#{selectedDTO.id}" />
			</p:panelGrid>
			
			<p:panelGrid columns="4" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank">
				<p:outputLabel value="Fecha:  " styleClass="label-form"/>					
				<h:outputText value="#{selectedDTO.fecha}">
					<f:convertDateTime pattern="dd/MM/yyyy"/> 
				</h:outputText>
				<p:outputLabel value="Condición de Venta:  " styleClass="label-form"/>
				<h:outputText value="#{selectedDTO.descripcionCondicionVenta}" />					 
			</p:panelGrid>			
						
			<p:panelGrid columns="2" columnClasses="ui-grid-col-2,ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank">
				<p:outputLabel value="Estado de Pago:  " styleClass="label-form"/>
				<h:outputText value="#{selectedDTO.descripcionEstadoPago}" />
			</p:panelGrid>
			
			<p:panelGrid columns="4" columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank">
				<p:outputLabel value="Nro Proveedor:  " styleClass="label-form"/>
				<h:outputText value="#{selectedDTO.idProveedor}" />
				<p:outputLabel value="Razón Social del Proveedor:  " styleClass="label-form"/>
				<h:outputText value="#{selectedDTO.razonSocialProveedor}" />					 
			</p:panelGrid>			
				
			<p:panel header="Detalle"
			         toggleable="false"
			         closable="false">
			         
			         <p:dataTable id="detalles" var="det" value="#{selectedDTO.coleccionDetalleCompra}" emptyMessage="No existen datos">
						<p:column rendered="#{det.idArticulo != null}">
							<f:facet name="header">
								<h:outputText value="Cod Articulo" />
							</f:facet>
							<h:outputText value="#{det.idArticulo}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Descripción" />
							</f:facet>
							<h:outputText value="#{det.descripcion}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Precio Unitario" />
							</f:facet>
							<h:outputText value="#{det.precioUnitario}">
								<f:convertNumber type="currency"/>
							</h:outputText>
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Cantidad" />
							</f:facet>
							<h:outputText value="#{det.cantidad}"/>
						</p:column>
						<p:column rendered="false">
							<f:facet name="header">
								<h:outputText value="% Descuento" />
							</f:facet>
							<h:outputText value="#{det.descuento}" />
						</p:column>
						<p:column>
							<f:facet name="header">
								<h:outputText value="Monto Total" />
							</f:facet>
							<h:outputText value="#{det.montoTotal}" >
								<f:convertNumber type="currency"/>
							</h:outputText>
						</p:column>
					</p:dataTable>			
			</p:panel>
			
			<p:spacer height="20"/>

			<p:panelGrid id="lblImporteTotal" columns="2" columnClasses="ui-grid-col-2,ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank">
				<p:outputLabel value="Importe Total:  " styleClass="label-form"/>
				<h:outputText value="#{selectedDTO.importeTotal}" style="font-size: 1.5em;">
					<f:convertNumber type="currency"/>
				</h:outputText>
			</p:panelGrid>
			
		</p:panel>				 
	</ui:define>	
</ui:composition>